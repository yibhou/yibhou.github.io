<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>《JavaScript权威指南》读书笔记（二） | 学习博客</title>
    <meta name="description" content="记录个人学习与成长的点滴">
    <meta name="keywords" content="HTML,CSS,JavaScript,Node,React,Vue,VuePress">
  <link rel="alternate" type="application/rss+xml" href="https://mjazz.xyz/rss.xml" title=" RSS Feed">
  <link rel="alternate" type="application/atom+xml" href="https://mjazz.xyz/feed.atom" title=" Atom Feed">
  <link rel="alternate" type="application/json" href="https://mjazz.xyz/feed.json" title=" JSON Feed">
    
    <link rel="preload" href="/assets/css/0.styles.9a9a7039.css" as="style"><link rel="preload" href="/assets/js/app.bdce5e38.js" as="script"><link rel="preload" href="/assets/js/4.2efa178c.js" as="script"><link rel="preload" href="/assets/js/5.cd94e518.js" as="script"><link rel="preload" href="/assets/js/20.4ebc96ee.js" as="script"><link rel="preload" href="/assets/js/6.cd22085d.js" as="script"><link rel="preload" href="/assets/js/10.78ec3373.js" as="script"><link rel="preload" href="/assets/js/8.17061641.js" as="script"><link rel="prefetch" href="/assets/js/1.0b127030.js"><link rel="prefetch" href="/assets/js/11.4a50bb2f.js"><link rel="prefetch" href="/assets/js/12.932b1e80.js"><link rel="prefetch" href="/assets/js/13.089b917a.js"><link rel="prefetch" href="/assets/js/14.ad9d6fe0.js"><link rel="prefetch" href="/assets/js/15.4d7fac21.js"><link rel="prefetch" href="/assets/js/16.4b6a3176.js"><link rel="prefetch" href="/assets/js/17.a330e63d.js"><link rel="prefetch" href="/assets/js/18.3d2fdabb.js"><link rel="prefetch" href="/assets/js/19.68a7e869.js"><link rel="prefetch" href="/assets/js/21.40d874d6.js"><link rel="prefetch" href="/assets/js/22.edbf5235.js"><link rel="prefetch" href="/assets/js/23.99131bb5.js"><link rel="prefetch" href="/assets/js/7.35b6108c.js"><link rel="prefetch" href="/assets/js/9.1866e629.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.0d9cdb99.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9a9a7039.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="global-layout" class="vuepress-theme-blog"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link"></a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link"></a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></li></ul></div></div></div> <div class="content-wrapper"><div class="post"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        《JavaScript权威指南》读书笔记（二）
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">林明杰</span> <span itemprop="address">   in Canton</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2020-02-20T00:00:00.000Z">
      2020-02-20
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-d832e844><a href="/tag/JavaScript" data-v-d832e844> JavaScript </a></li><li class="post-tag" data-v-d832e844><a href="/tag/读书笔记" data-v-d832e844> 读书笔记 </a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><blockquote><p><em>本文目的是对原书（《JavaScript权威指南》第六版）中的一些错误或疑惑点进行纠正与补充，以及记录一些重要的知识点。文章中的标题序号与书籍目录序号保持一致。</em></p></blockquote> <p></p><div class="table-of-contents"><ul><li><a href="#_6-对象">6 对象</a><ul><li><a href="#_6-1-创建对象">6.1 创建对象</a><ul><li><a href="#_6-1-3-原型">6.1.3 原型</a></li><li><a href="#_6-1-4-object-create">6.1.4 Object.create()</a></li></ul></li><li><a href="#_6-2-属性的查询和设置">6.2 属性的查询和设置</a><ul><li><a href="#_6-2-2-继承">6.2.2 继承</a></li><li><a href="#_6-2-3-属性访问错误">6.2.3 属性访问错误</a></li></ul></li><li><a href="#_6-3-删除属性">6.3 删除属性</a></li><li><a href="#_6-4-检测属性">6.4 检测属性</a></li><li><a href="#_6-5-枚举属性">6.5 枚举属性</a></li><li><a href="#_6-6-属性getter和setter">6.6 属性getter和setter</a></li><li><a href="#_6-7-属性的特性">6.7 属性的特性</a></li><li><a href="#_6-8-对象的特性">6.8 对象的特性</a><ul><li><a href="#_6-8-1-prototype">6.8.1 prototype</a></li><li><a href="#_6-8-2-class">6.8.2 class</a></li><li><a href="#_6-8-3-可扩展性">6.8.3 可扩展性</a></li></ul></li><li><a href="#_6-9-序列化对象">6.9 序列化对象</a></li></ul></li><li><a href="#_7-数组">7 数组</a><ul><li><a href="#_7-2-数组元素的读和写">7.2 数组元素的读和写</a></li><li><a href="#_7-3-稀疏数组">7.3 稀疏数组</a></li><li><a href="#_7-4-数组长度">7.4 数组长度</a></li><li><a href="#_7-8-数组方法">7.8 数组方法</a><ul><li><a href="#_7-8-1-join">7.8.1 join()</a></li><li><a href="#_7-8-6-splice">7.8.6 splice()</a></li></ul></li><li><a href="#_7-9-ecmascript-5中的数组方法">7.9 ECMAScript 5中的数组方法</a><ul><li><a href="#_7-9-2-map">7.9.2 map()</a></li><li><a href="#_7-9-3-filter">7.9.3 filter()</a></li><li><a href="#_7-9-4-every-和some">7.9.4 every()和some()</a></li><li><a href="#_7-9-5-reduce-和reduceright">7.9.5 reduce()和reduceRight()</a></li><li><a href="#_7-9-5-indexof-和lastindexof">7.9.5 indexOf()和lastIndexOf()</a></li></ul></li><li><a href="#_7-10-数组类型">7.10 数组类型</a></li><li><a href="#_7-11-类数组对象">7.11 类数组对象</a></li><li><a href="#_7-12-作为数组的字符串">7.12 作为数组的字符串</a></li></ul></li><li><a href="#_8-函数">8 函数</a><ul><li><a href="#_8-1-函数定义">8.1 函数定义</a></li><li><a href="#_8-2-函数调用">8.2 函数调用</a><ul><li><a href="#_8-2-3-构造函数调用">8.2.3 构造函数调用</a></li></ul></li><li><a href="#_8-3-函数的实参和形参">8.3 函数的实参和形参</a><ul><li><a href="#_8-3-2-实参对象">8.3.2 实参对象</a></li></ul></li></ul></li></ul></div><p></p> <h2 id="_6-对象"><a href="#_6-对象" class="header-anchor">#</a> 6 对象</h2> <p>对象的属性特性 (property attribute)：</p> <ul><li>可写 (writable attribute)：表明是否可以设置该属性的值。</li> <li>可枚举 (enumerable attribute)：表明是否可以通过for/in循环返回该属性。</li> <li>可配置 (configurable attribute)：表明是否可以删除该属性或修改属性特性。</li></ul> <p>对象特性 (object attribute)：</p> <ul><li>对象的原型 (prototype)：指向另外一个对象，当前对象的属性继承自它的原型对象。</li> <li>对象的类 (class)：是一个标识对象类型的字符串。</li> <li>对象的扩展标记 (extensible flag)：表明（在ECMAScript 5中）是否可以向该对象添加新属性。</li></ul> <h3 id="_6-1-创建对象"><a href="#_6-1-创建对象" class="header-anchor">#</a> 6.1 创建对象</h3> <h4 id="_6-1-3-原型"><a href="#_6-1-3-原型" class="header-anchor">#</a> 6.1.3 原型</h4> <div class="custom-block danger"><p class="custom-block-title">纠正</p> <p><em>Page 121</em> -&gt; 每一个JavaScript对象都和另一个对象（原型对象）或null相关联。</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; true</span>
</code></pre></div><p>所有通过对象直接量创建的对象都有一个相同的原型对象，可以通过Object.prototype获得这个原型对象的引用：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype <span class="token comment">// =&gt; true</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype <span class="token comment">// =&gt; true</span>

<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token comment">// =&gt; true</span>

<span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype <span class="token comment">// =&gt; true</span>
</code></pre></div><h4 id="_6-1-4-object-create"><a href="#_6-1-4-object-create" class="header-anchor">#</a> 6.1.4 Object.create()</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">inherit</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token function">TypeError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span>create<span class="token punctuation">)</span>
    <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">typeof</span> p<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> t <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token function">TypeError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  f<span class="token punctuation">.</span>prototype <span class="token operator">=</span> p<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">library_function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token function">inherit</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 防止对o的意外修改</span>
</code></pre></div><h3 id="_6-2-属性的查询和设置"><a href="#_6-2-属性的查询和设置" class="header-anchor">#</a> 6.2 属性的查询和设置</h3> <h4 id="_6-2-2-继承"><a href="#_6-2-2-继承" class="header-anchor">#</a> 6.2.2 继承</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// o继承自Object.prototype</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  $r<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span> <span class="token function">r</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$r<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token function">r</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$r <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token function">inherit</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> q <span class="token operator">=</span> <span class="token function">inherit</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
q<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token comment">// 在q的原型链查询属性x：q.x-&gt;p.x-&gt;o.x(=1)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1</span>
<span class="token comment">// 属性赋值操作首先检查原型链，以此判定是否允许赋值操作，</span>
<span class="token comment">// 如果原型链上属性x不存在或x允许被修改（可写），即允许赋值操作，那么会</span>
<span class="token comment">// 在原始对象q上创建属性（当x是继承属性或x不存在时）或修改属性（当x为q的属性时）。</span>
<span class="token comment">// 如果不允许赋值操作，则赋值失败但不报错（在严格模式中会抛出TypeError）。</span>
q<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
<span class="token comment">// 不会修改原型链上原型对象的属性，</span>
<span class="token comment">// 属性赋值要么失败，要么在原始对象创建新属性或修改属性</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 12</span>

<span class="token comment">// 如果赋值给存取器属性，那么创建操作替换为使用原型对象o的setter方法，</span>
<span class="token comment">// 修改操作替换为原始对象q的setter方法，</span>
<span class="token comment">// 并且setter或getter方法是由原始对象q调用的，而不是原型对象o</span>
q<span class="token punctuation">.</span>r <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token comment">// 依然不会修改原型对象的属性</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 10</span>
</code></pre></div><h4 id="_6-2-3-属性访问错误"><a href="#_6-2-3-属性访问错误" class="header-anchor">#</a> 6.2.3 属性访问错误</h4> <p>在这些场景下给对象设置属性会失败：</p> <ul><li>“不可写”的自有属性或继承属性；</li> <li>“不可扩展”的对象添加新属性。</li></ul> <h3 id="_6-3-删除属性"><a href="#_6-3-删除属性" class="header-anchor">#</a> 6.3 删除属性</h3> <p>delete运算符只能删除自有属性，不能删除继承属性（要删除继承属性必须从定义这个属性的原型对象上删除它，而且这会影响到继承自这个原型的所有对象）。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// 全局对象的不可配置属性</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 全局对象的可配置属性</span>
z <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 全局对象的可配置属性</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>

Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>configurable<span class="token punctuation">;</span> <span class="token comment">// =&gt; false</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">'z'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>configurable<span class="token punctuation">;</span> <span class="token comment">// =&gt; true</span>

<span class="token keyword">delete</span> z<span class="token punctuation">;</span> <span class="token comment">// =&gt; true</span>
</code></pre></div><h3 id="_6-4-检测属性"><a href="#_6-4-检测属性" class="header-anchor">#</a> 6.4 检测属性</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">// 检测是否为对象的自有属性或继承属性</span>
<span class="token string">&quot;x&quot;</span> <span class="token keyword">in</span> o <span class="token comment">// =&gt; true</span>
<span class="token string">&quot;y&quot;</span> <span class="token keyword">in</span> o <span class="token comment">// =&gt; true</span>
<span class="token string">&quot;toString&quot;</span> <span class="token keyword">in</span> o <span class="token comment">// =&gt; true</span>

<span class="token comment">// 是否为自有属性</span>
o<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; false</span>
o<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>

<span class="token comment">// 是否为可枚举的自有属性</span>
o<span class="token punctuation">.</span><span class="token function">propertyIsEnumerable</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; false</span>
o<span class="token punctuation">.</span><span class="token function">propertyIsEnumerable</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
</code></pre></div><h3 id="_6-5-枚举属性"><a href="#_6-5-枚举属性" class="header-anchor">#</a> 6.5 枚举属性</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 内置方法不可枚举</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">propertyIsEnumerable</span><span class="token punctuation">(</span><span class="token string">&quot;toString&quot;</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; false</span>

<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> c<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 返回所有可枚举的自有属性</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span>
<span class="token comment">// 返回所有自有属性</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span>
</code></pre></div><h3 id="_6-6-属性getter和setter"><a href="#_6-6-属性getter和setter" class="header-anchor">#</a> 6.6 属性getter和setter</h3> <p>由getter和setter方法定义的属性称为“存取器属性” (accessor property)。</p> <p>与“数据属性” (data property) 不同，如果存取器属性同时具有getter和setter方法，那么它是一个可读/写属性。如果只有getter方法，那么它是一个只读属性。如果只有setter方法，那么它是一个只写属性，读取只写属性始终返回undefined。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  data_prop<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 一般的数据属性</span>

  <span class="token comment">// 存取器属性</span>
  <span class="token keyword">get</span> <span class="token function">accessor_prop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data_prop<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token function">accessor_prop</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data_prop <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token function">write_only_prop</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>accessor_prop <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

o<span class="token punctuation">.</span>write_only_prop <span class="token comment">// =&gt; undefined</span>
o<span class="token punctuation">.</span>write_only_prop <span class="token operator">=</span> <span class="token string">&quot;richard&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>data_prop<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; &quot;richard&quot;</span>
</code></pre></div><h3 id="_6-7-属性的特性"><a href="#_6-7-属性的特性" class="header-anchor">#</a> 6.7 属性的特性</h3> <p>数据属性的特性分别是它的<strong>值</strong> (value)、<strong>可写性</strong> (writable)、<strong>可枚举性</strong> (enumerable) 和<strong>可配置性</strong> (configurable)。</p> <p>存取器属性的特性分别是<strong>读取</strong> (get)、<strong>写入</strong> (set)、<strong>可枚举性</strong>和<strong>可配置性</strong>。存取器属性没有值和可写性，它的可写性是由setter方法存在与否来决定的。</p> <p>“属性描述符”对象的属性与属性特性同名：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// =&gt; { value: &quot;&quot;, writable: true, enumerable: true, configurable: true }</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">&quot;data_prop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// =&gt; { get: undefined, enumerable: true, configurable: true, set: /*ƒunc*/ }</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">&quot;write_only_prop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 顾名思义，getOwnPropertyDescriptor只是获取自有属性的描述符，</span>
<span class="token comment">// 如果用来获取继承属性或不存在属性的描述符，将会返回undefined</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; undefined</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;toString&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; undefined</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 添加一个不可枚举的数据属性x并赋值为1</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  writable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  configurable<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span>x<span class="token punctuation">;</span> <span class="token comment">// =&gt; 1</span>
<span class="token comment">// 所有可枚举的自有属性</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; []</span>
<span class="token comment">// 将属性x改为只读</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> writable<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 尝试修改只读属性</span>
o<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">// 修改失败但不报错（在严格模式中抛出类型错误异常）</span>
o<span class="token punctuation">.</span>x <span class="token comment">// =&gt; 1</span>
<span class="token comment">// 由于o是可配置的 可以通过修改描述符的方式修改只读属性的值</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span>x <span class="token comment">// =&gt; 2</span>
<span class="token comment">// 将x从数据属性修改为存取器属性</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span>x <span class="token comment">// =&gt; 0</span>

<span class="token comment">// 不能既使用数据属性又使用存取器属性的特性 否则将抛出TypeError</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  writable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>传入Object.defineProperty()的属性描述符对象不必包含所有4个特性。注意，这个方法不能既使用数据属性又使用存取器属性的特性，否则将抛出TypeError。它也不能用来修改继承属性的特性 <a href="#_6-2-2-%E7%BB%A7%E6%89%BF">(类似6.2.2节)</a>。</p> <p>对于创建属性来说，默认的属性特性值为false（writable/configurable/enumerable）或undefined（value/get/set）。对于修改已有属性来说，默认的属性特性值没有做任何修改。但如果将属性从数据属性修改为存取器属性，或者从存取器属性修改为数据属性，那么configurable和enumerable除外的属性特性值将丢弃，即重置为false或undefined。</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 修改继承属性的特性 将会在原始对象o上创建新属性x</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> writable<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span>x <span class="token comment">// =&gt; undefined</span>
</code></pre></div><p>使用Object.defineProperties()可以创建或修改对象的多个属性：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> writable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> enumerable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> configurable<span class="token operator">:</span><span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  y<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> writable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> enumerable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> configurable<span class="token operator">:</span><span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  r<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    enumerable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    configurable<span class="token operator">:</span><span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span>x <span class="token comment">// =&gt; 1</span>
o<span class="token punctuation">.</span>y <span class="token comment">// =&gt; 1</span>
</code></pre></div><p>对于不能被创建或修改的属性，如果使用Object.defineProperty()和Object.defineProperties()进行创建或修改，将抛出类型错误异常。例如，不能给不可扩展的对象新增属性，否则将抛出TypeError。规则如下：</p> <ul><li>如果对象是不可扩展的，则可以修改已有的自有属性，但不能给它创建新属性。</li> <li>如果属性是不可配置的，则不能修改它的可配置性和可枚举性。</li> <li>如果存取器属性是不可配置的，则不能修改它的getter和setter方法，也不能将它转换为数据属性。</li> <li>如果数据属性是不可配置的，则不能将它转换为存取器属性。</li> <li>如果数据属性是不可配置的，则不能将它的可写性从false修改为true，但可以从true修改为false。（即仅仅可以修改为只读数据属性）</li> <li>如果数据属性是不可配置且不可写的，则不能修改它的值。而可配置且不可写属性可以修改它的值（实际上是先将它标记为可写的，然后修改它的值，最后转换为不可写的）。</li></ul> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>从规则可见，不可配置的属性是不能修改get、set、enumerable和configurable这些特性的，并且也不能互相转换为数据属性或存取器属性。writable仅仅能修改为false（只读），而value必须在writable为true时可修改。</p></div> <h3 id="_6-8-对象的特性"><a href="#_6-8-对象的特性" class="header-anchor">#</a> 6.8 对象的特性</h3> <h4 id="_6-8-1-prototype"><a href="#_6-8-1-prototype" class="header-anchor">#</a> 6.8.1 prototype</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> q <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 通过对象直接量或Object.create创建的对象有一个constructor属性，</span>
<span class="token comment">// 这个constructor属性指向Object构造函数</span>
o<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Object <span class="token comment">// =&gt; true</span>
p<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Object <span class="token comment">// =&gt; true</span>
q<span class="token punctuation">.</span>constructor <span class="token comment">// =&gt; undefined</span>

<span class="token comment">// 对象直接量的原型是o.constructor.prototype，即Object.prototype</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype <span class="token comment">// =&gt; true</span>
<span class="token comment">// 或者通过__proto__来获得原型对象（非标准，不推荐使用）</span>
o<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype <span class="token comment">// =&gt; true</span>

<span class="token comment">// 检测Object.prototype是否为对象o的原型，或者是否在对象o的原型链上</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
</code></pre></div><h4 id="_6-8-2-class"><a href="#_6-8-2-class" class="header-anchor">#</a> 6.8.2 class</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">classof</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在ES5中不需要对null和undefined进行特殊处理</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&quot;Null&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&quot;Undefined&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">classof</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;Number&quot;</span>
<span class="token function">classof</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;String&quot;</span>
<span class="token function">classof</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;Boolean&quot;</span>
<span class="token function">classof</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;Array&quot;</span>
<span class="token function">classof</span><span class="token punctuation">(</span><span class="token regex">/./</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;Regexp&quot;</span>

<span class="token comment">// 通过对象直接量或Object.create创建对象 它的class为Object</span>
<span class="token function">classof</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;Object&quot;</span>
<span class="token function">classof</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;Object&quot;</span>
<span class="token function">classof</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;Object&quot;</span>

<span class="token comment">// 通过内置构造函数创建对象 它的class与构造函数名称一致</span>
<span class="token function">classof</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;Date&quot;</span>
<span class="token comment">// 宿主对象的class与具体实现由关</span>
<span class="token function">classof</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;Window&quot;</span>
<span class="token comment">// 通过自定义构造函数创建对象 它的class为Object</span>
<span class="token function">classof</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;Object&quot;</span>
</code></pre></div><h4 id="_6-8-3-可扩展性"><a href="#_6-8-3-可扩展性" class="header-anchor">#</a> 6.8.3 可扩展性</h4> <p>在ECMAScript 5中，所有的内置对象和自定义对象都是可扩展的，除非将它们转换为不可扩展的。而宿主对象的可扩展性是由实现的JavaScript引擎定义的。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 检测对象是否可扩展</span>
Object<span class="token punctuation">.</span><span class="token function">isExtensible</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>

<span class="token comment">// 将对象转换为不可扩展的 一旦转换成功将无法转为可扩展</span>
Object<span class="token punctuation">.</span><span class="token function">preventExtensions</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; { x: 1 }</span>

Object<span class="token punctuation">.</span><span class="token function">isExtensible</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token comment">// =&gt; false</span>
o<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span>y <span class="token comment">// =&gt; undefined</span>

<span class="token comment">// preventExtensions方法只影响原始对象的可扩展性 而不会影响原型对象</span>
o<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">2</span>
o<span class="token punctuation">.</span>y <span class="token comment">// =&gt; 2</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token function">y</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>z <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 检测对象是否已封锁（对象不可扩展+所有自有属性都不可配置）</span>
Object<span class="token punctuation">.</span><span class="token function">isSealed</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token comment">// =&gt; false</span>
<span class="token comment">// 封锁对象</span>
Object<span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
Object<span class="token punctuation">.</span><span class="token function">isSealed</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
<span class="token comment">// 不能删除不可配置属性</span>
<span class="token keyword">delete</span> o<span class="token punctuation">.</span>x <span class="token comment">// =&gt; false</span>

<span class="token comment">// 检测对象是否已冻结（对象已封锁+所有自有属性设置为只读）</span>
Object<span class="token punctuation">.</span><span class="token function">isFrozen</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token comment">// =&gt; false</span>
<span class="token comment">// 冻结对象</span>
Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
Object<span class="token punctuation">.</span><span class="token function">isFrozen</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
o<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">2</span>
o<span class="token punctuation">.</span>x <span class="token comment">// =&gt; 1</span>
<span class="token comment">// 存取器属性不受影响 可以通过setter方法正常赋值</span>
o<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">2</span>
o<span class="token punctuation">.</span>z <span class="token comment">// =&gt; 2</span>
</code></pre></div><h3 id="_6-9-序列化对象"><a href="#_6-9-序列化对象" class="header-anchor">#</a> 6.9 序列化对象</h3> <p>JSON.stringify只能序列化对象的可枚举自有属性。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; &quot;null&quot;</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; &quot;null&quot;</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; &quot;null&quot;</span>

<span class="token comment">// 不能序列化undefined和函数</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; undefined</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; undefined</span>

<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; &quot;&quot;2020-02-23T13:35:43.583Z&quot;&quot;</span>

<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; &quot;{}&quot;</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; &quot;{}&quot;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// =&gt; &quot;{&quot;x&quot;:1,&quot;y&quot;:false,&quot;z&quot;:[&quot;&quot;,null,null,null,null],&quot;null&quot;:null,&quot;r&quot;:{},&quot;date&quot;:&quot;2020-02-23T14:07:20.221Z&quot;,&quot;error&quot;:{},&quot;number&quot;:1}&quot;</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">&quot;x&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>     <span class="token comment">// =&gt; 1</span>
  <span class="token string">&quot;y&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// =&gt; false</span>
  <span class="token string">&quot;z&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// =&gt; [&quot;&quot;, null, null, null, null]</span>
  <span class="token string">&quot;null&quot;</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>           <span class="token comment">// =&gt; null</span>
  <span class="token string">&quot;undefined&quot;</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// 不能序列化</span>
  <span class="token string">&quot;f&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>     <span class="token comment">// 不能序列化</span>
  <span class="token string">&quot;r&quot;</span><span class="token operator">:</span> <span class="token regex">/(?:)/</span><span class="token punctuation">,</span>            <span class="token comment">// =&gt; {}</span>
  <span class="token string">&quot;date&quot;</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">,</span>       <span class="token comment">// =&gt; &quot;2020-02-23T13:59:42.501Z&quot;</span>
  <span class="token string">&quot;error&quot;</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">,</span>     <span class="token comment">// =&gt; {}</span>
  <span class="token string">&quot;number&quot;</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; 1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/*
  =&gt; {
        x: 1,
        y: false,
        z: [&quot;&quot;, null, null, null, null],
        null: null,
        r: {},
        date: &quot;2020-02-23T14:14:04.652Z&quot;, // 日期字符串不会解析为日期对象
        error: {},
        number: 1
      }
*/</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">'{&quot;x&quot;:[1,2],&quot;date&quot;:&quot;2020-02-23T14:07:20.221Z&quot;}'</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * @param key 属性名或数组索引
 * @param value 属性值或数组元素
 */</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token string">&quot;date&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 返回undefined则delete该属性或元素</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> value<span class="token punctuation">;</span> <span class="token comment">// 返回非undefined则替换值</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

o<span class="token punctuation">.</span>date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; 1</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 序列化指定参数
 */</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  y<span class="token operator">:</span> <span class="token punctuation">{</span>
    z<span class="token operator">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 格式化JSON字符串：换行符+2个空格</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">/*
  =&gt; &quot;{
      ##&quot;x&quot;: 1,
      ##&quot;y&quot;: {
      ####&quot;z&quot;: 2
      ##}
      }&quot;
*/</span>
<span class="token comment">// 格式化JSON字符串：换行符+2个#</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'##'</span><span class="token punctuation">)</span>

<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;y&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;{&quot;x&quot;:1,&quot;y&quot;:{}}&quot;</span>

<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> key <span class="token operator">==</span> <span class="token string">&quot;z&quot;</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> value<span class="token punctuation">;</span> <span class="token comment">// =&gt; &quot;{&quot;x&quot;:1,&quot;y&quot;:{}}&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  y<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">toJSON</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// key=&quot;y&quot;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> z<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">toJSON</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// key=&quot;&quot;</span>
    <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;{&quot;y&quot;:{&quot;z&quot;:2}}&quot;</span>
</code></pre></div><h2 id="_7-数组"><a href="#_7-数组" class="header-anchor">#</a> 7 数组</h2> <h3 id="_7-2-数组元素的读和写"><a href="#_7-2-数组元素的读和写" class="header-anchor">#</a> 7.2 数组元素的读和写</h3> <p>在使用方括号访问数组元素时，与方括号访问对象属性一样，JavaScript会将方括号中的值转换成字符串。如果它是一个[0, 2<sup>32</sup>-2]之间的非负整数字符串，则这个字符串称为数组的索引。除此之外，这个字符串只能作为数组对象的属性名，而不是一个索引。数组的特殊之处在于，使用索引的数组会自动维护它的length属性值。实际上，数组索引也是数组对象的属性名，这意味着数组没有“越界”错误的概念。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1.23</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 创建一个名为&quot;-1.23&quot;的属性</span>

a<span class="token punctuation">[</span><span class="token string">&quot;1000&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 创建数组的1001个元素</span>
a<span class="token punctuation">.</span>length <span class="token comment">// =&gt; 1001</span>

a<span class="token punctuation">[</span><span class="token number">1.000</span><span class="token punctuation">]</span> <span class="token comment">// a[String(1.000)]-&gt;a[&quot;1&quot;]</span>
</code></pre></div><h3 id="_7-3-稀疏数组"><a href="#_7-3-稀疏数组" class="header-anchor">#</a> 7.3 稀疏数组</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">]</span>
a<span class="token punctuation">.</span>length <span class="token comment">// =&gt; 3</span>
<span class="token number">0</span> <span class="token keyword">in</span> a <span class="token comment">// =&gt; false</span>
</code></pre></div><h3 id="_7-4-数组长度"><a href="#_7-4-数组长度" class="header-anchor">#</a> 7.4 数组长度</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

a<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">// a =&gt; [1, 2]</span>
a<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">// a =&gt; [1, 2, /*empty*/]</span>

Object<span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token comment">// a的属性不可配置 因此不能删除</span>
a<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// a =&gt; [1, 2]</span>

a<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">// a =&gt; [1, 2, /*empty*/]</span>
<span class="token comment">// 将length设为只读属性</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">&quot;length&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> writable<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
a<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// a =&gt; [1, 2, /*empty*/]</span>
</code></pre></div><h3 id="_7-8-数组方法"><a href="#_7-8-数组方法" class="header-anchor">#</a> 7.8 数组方法</h3> <p>这些数组方法调用后将会修改原数组：<code>reverse</code>、<code>sort</code>、<code>splice</code>、<code>push</code>、<code>pop</code>、<code>unshift</code>、<code>shift</code>。</p> <h4 id="_7-8-1-join"><a href="#_7-8-1-join" class="header-anchor">#</a> 7.8.1 join()</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;1,2,c&quot;</span>
</code></pre></div><h4 id="_7-8-6-splice"><a href="#_7-8-6-splice" class="header-anchor">#</a> 7.8.6 splice()</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// =&gt; [7,8] a=[1,2,3,4,5,6]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; [4,5] a=[1,2,3,6]</span>

<span class="token comment">// =&gt; []        a=[1,2,3,'a','b',6]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// =&gt; ['a','b'] a=[1,2,3,4,[5],6]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// =&gt; []        a=[1,2,3,4,[5],6]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// =&gt; [[5]]     a=[1,2,3,4,5,6]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; [1] a=[2,3,4,5,6]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; [6] a=[2,3,4,5]</span>
</code></pre></div><h3 id="_7-9-ecmascript-5中的数组方法"><a href="#_7-9-ecmascript-5中的数组方法" class="header-anchor">#</a> 7.9 ECMAScript 5中的数组方法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token comment">// 与map|filter|every|some方法的参数一样</span>
a<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span> <span class="token comment">// =&gt; { x: 1 }</span>
  array <span class="token operator">==</span> a <span class="token comment">// =&gt; true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_7-9-2-map"><a href="#_7-9-2-map" class="header-anchor">#</a> 7.9.2 map()</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token comment">// 稀疏数组调用依然返回稀疏数组</span>
a<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// =&gt; [1, 2, /*empty*/, 3]</span>
  <span class="token comment">// 但这里不遍历不存在的元素</span>
  <span class="token keyword">return</span> value
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_7-9-3-filter"><a href="#_7-9-3-filter" class="header-anchor">#</a> 7.9.3 filter()</h4> <p>filter()会跳过稀疏数组中缺少的元素，它的返回数组总是稠密的。</p> <h4 id="_7-9-4-every-和some"><a href="#_7-9-4-every-和some" class="header-anchor">#</a> 7.9.4 every()和some()</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 当空数组或所有元素判断为true时返回true</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* 不执行函数 */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>

<span class="token comment">// 当空数组或所有元素判断为false时返回false</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* 不执行函数 */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; false</span>
</code></pre></div><h4 id="_7-9-5-reduce-和reduceright"><a href="#_7-9-5-reduce-和reduceright" class="header-anchor">#</a> 7.9.5 reduce()和reduceRight()</h4> <div class="custom-block danger"><p class="custom-block-title">纠正</p> <p><em>Page 159</em> -&gt; reduce()和reduceRight()都不能接收一个可选参数作为化简函数调用时的this值。</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>

a<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> value<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// =&gt; 10</span>
  <span class="token keyword">return</span> accumulator <span class="token operator">+</span> value
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">// 计算2^(3^4) 等价于先reverse再reduce</span>
a<span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> accumulator<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 空数组不传初始值参数将抛出类型错误异常：</span>
<span class="token comment">// TypeError: Reduce of empty array with no initial value</span>
<span class="token comment">// [].reduce(function() { /* 不执行函数 */ })</span>

<span class="token comment">// 仅有一个值时直接返回该值</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* 不执行函数 */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; 1</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* 不执行函数 */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; 1</span>
</code></pre></div><h4 id="_7-9-5-indexof-和lastindexof"><a href="#_7-9-5-indexof-和lastindexof" class="header-anchor">#</a> 7.9.5 indexOf()和lastIndexOf()</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>

a<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; 1</span>
<span class="token comment">// 从索引为2的元素开始搜索</span>
a<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; 3</span>
<span class="token comment">// 从倒数三个元素开始搜索</span>
a<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; 3</span>

a<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; 1</span>
</code></pre></div><h3 id="_7-10-数组类型"><a href="#_7-10-数组类型" class="header-anchor">#</a> 7.10 数组类型</h3> <div class="language-js extra-class"><pre class="language-js"><code>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>

<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token comment">// =&gt; true</span>

<span class="token comment">// 使用instanceof操作符的问题</span>
<span class="token keyword">var</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;iframe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>frames</span><span class="token punctuation">[</span>window<span class="token punctuation">.</span>frames<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Array<span class="token punctuation">;</span>
a <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token comment">// =&gt; false</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 数组检测方法（兼容ES3）</span>
<span class="token keyword">var</span> isArray <span class="token operator">=</span> Array<span class="token punctuation">.</span>isArray <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> o <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;[object Array]&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-11-类数组对象"><a href="#_7-11-类数组对象" class="header-anchor">#</a> 7.11 类数组对象</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 类数组对象检测方法
 * 字符串与函数都有length属性 可以通过typeof排除
 * 在客户端JavaScript中的DOM文本节点也有length，可以通过o.nodeType != 3排除
 */</span>
<span class="token keyword">function</span> <span class="token function">isArrayLike</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">&amp;&amp;</span>                                 <span class="token comment">// o非null或undefined等</span>
      <span class="token keyword">typeof</span> o <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span>             <span class="token comment">// o是对象</span>
      <span class="token function">isFinite</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>                <span class="token comment">// o.length是有限数值</span>
      o<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>                     <span class="token comment">// o.length是非负数</span>
      o<span class="token punctuation">.</span>length <span class="token operator">===</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token comment">// o.length是整数</span>
      o<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span>          <span class="token comment">// o.length小于2^32</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token keyword">else</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;0&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> length<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>

<span class="token comment">// 数组与类数组使用数组方法的两个特例：返回结果不一样</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;1,2&quot;</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;[object Object]&quot;</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; [1, 2, 3]</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; [o, 3]</span>

<span class="token comment">// slice方法将类数组对象转换成真正的数组</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; [1, 2]</span>
</code></pre></div><h3 id="_7-12-作为数组的字符串"><a href="#_7-12-作为数组的字符串" class="header-anchor">#</a> 7.12 作为数组的字符串</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">&quot;JavaScript&quot;</span>

s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;J&quot;</span>
s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// =&gt; &quot;J&quot;</span>

<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;J a v a S c r i p t&quot;</span>

<span class="token comment">// 字符串是不可变值</span>
<span class="token comment">// 如果作为数组的字符串使用了诸如reverse、sort、splice等会修改</span>
<span class="token comment">// 原数组的方法，将抛出类型错误异常</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_8-函数"><a href="#_8-函数" class="header-anchor">#</a> 8 函数</h2> <h3 id="_8-1-函数定义"><a href="#_8-1-函数定义" class="header-anchor">#</a> 8.1 函数定义</h3> <p>函数定义表达式的名称是该函数内部的一个局部变量，它指向了这个函数对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f <span class="token operator">===</span> g<span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
<span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> g<span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;undefined&quot;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <p>函数声明语句并非真正的语句 <a href="/_posts/2020-02-08-javascript-definitive-guide-notes-1.html#_5-3-2-function">(5.3.2节)</a>，ECMAScript规范仅允许它们作为顶级语句。它们可以出现在全局代码中或者作为其他函数的嵌套函数，但不能出现在循环、条件判断或者try/catch/finally以及with语句中。一些JavaScript实现并未严格遵循这条规范。</p></div> <h3 id="_8-2-函数调用"><a href="#_8-2-函数调用" class="header-anchor">#</a> 8.2 函数调用</h3> <h4 id="_8-2-3-构造函数调用"><a href="#_8-2-3-构造函数调用" class="header-anchor">#</a> 8.2.3 构造函数调用</h4> <p>构造函数调用时会创建一个新的空对象，这个对象继承自构造函数的prototype属性。构造函数可以使用this关键字来引用这个新创建的对象。注意，尽管构造函数是一个方法调用，它依然会使用这个新对象作为调用上下文。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">m</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span> <span class="token operator">===</span> o <span class="token comment">// =&gt; false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">o<span class="token punctuation">.</span>m</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>如果构造函数显式地return一个对象，那么调用表达式的值就是这个对象。如果构造函数没有指定返回值，或者显式地返回一个原始值，那么这时将忽略返回值并将这个新对象this作为调用结果。</p> <h3 id="_8-3-函数的实参和形参"><a href="#_8-3-函数的实参和形参" class="header-anchor">#</a> 8.3 函数的实参和形参</h3> <h4 id="_8-3-2-实参对象"><a href="#_8-3-2-实参对象" class="header-anchor">#</a> 8.3.2 实参对象</h4> <p>在非严格模式下，实参对象中的数字索引和形参名称可以认为是相同变量的不同命名。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1</span>
  arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; null</span>
<span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在非严格模式中，函数的arguments仅仅是一个标识符，在严格模式中，它变成了一个保留字。严格模式中的函数不能使用arguments作为形参名或局部变量名，也不能赋值给arguments。<a href="/_posts/2020-02-08-javascript-definitive-guide-notes-1.html#_5-7-3-use-strict-指令">(5.7.3节)</a></p></div> <footer><form class="newsletter"><div class="newsletter__wrap"><div class="newsletter__title">邮件订阅</div> <div class="newsletter__content">接收最新文章的更新通知~</div> <div class="newsletter__fields"><input type="email" name="email" aria-label="Email" placeholder="Email" required="required" autocapitalize="off" autocorrect="off" data-cy="email" value="" class="newsletter__input"> <button type="submit" data-cy="submit" class="newsletter__button">
        订阅
      </button></div></div></form> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#_6-对象" title="6 对象">6 对象</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_6-1-创建对象" title="6.1 创建对象">6.1 创建对象</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_6-2-属性的查询和设置" title="6.2 属性的查询和设置">6.2 属性的查询和设置</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_6-3-删除属性" title="6.3 删除属性">6.3 删除属性</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_6-4-检测属性" title="6.4 检测属性">6.4 检测属性</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_6-5-枚举属性" title="6.5 枚举属性">6.5 枚举属性</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_6-6-属性getter和setter" title="6.6 属性getter和setter">6.6 属性getter和setter</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_6-7-属性的特性" title="6.7 属性的特性">6.7 属性的特性</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_6-8-对象的特性" title="6.8 对象的特性">6.8 对象的特性</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_6-9-序列化对象" title="6.9 序列化对象">6.9 序列化对象</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_7-数组" title="7 数组">7 数组</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_7-2-数组元素的读和写" title="7.2 数组元素的读和写">7.2 数组元素的读和写</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_7-3-稀疏数组" title="7.3 稀疏数组">7.3 稀疏数组</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_7-4-数组长度" title="7.4 数组长度">7.4 数组长度</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_7-8-数组方法" title="7.8 数组方法">7.8 数组方法</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_7-9-ecmascript-5中的数组方法" title="7.9 ECMAScript 5中的数组方法">7.9 ECMAScript 5中的数组方法</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_7-10-数组类型" title="7.10 数组类型">7.10 数组类型</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_7-11-类数组对象" title="7.11 类数组对象">7.11 类数组对象</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_7-12-作为数组的字符串" title="7.12 作为数组的字符串">7.12 作为数组的字符串</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_8-函数" title="8 函数">8 函数</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_8-1-函数定义" title="8.1 函数定义">8.1 函数定义</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_8-2-函数调用" title="8.2 函数调用">8.2 函数调用</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_8-3-函数的实参和形参" title="8.3 函数的实参和形参">8.3 函数的实参和形参</a></div></div></div></div></div> <footer class="footer" data-v-582f9766><div class="footer-left-wrap" data-v-582f9766><ul class="contact" data-v-582f9766></ul></div> <div class="footer-right-wrap" data-v-582f9766><ul class="copyright" data-v-582f9766></ul></div></footer></div></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/assets/js/app.bdce5e38.js" defer></script><script src="/assets/js/4.2efa178c.js" defer></script><script src="/assets/js/5.cd94e518.js" defer></script><script src="/assets/js/20.4ebc96ee.js" defer></script><script src="/assets/js/6.cd22085d.js" defer></script><script src="/assets/js/10.78ec3373.js" defer></script><script src="/assets/js/8.17061641.js" defer></script>
  </body>
</html>
